@model ApplicationUser

@{
    ViewData["Title"] = "Requests";
}

@functions {
    public string GetAvatarPath(ApplicationUser user)
    {
        var path = user.AvatarPath;
        if (path == null)
        {
            path = user.Gender?.Name == "Man" ? "no-profile-image-m.svg" : "no-profile-image-f.svg";
        }
        return path;
    }
}

<div class="row align-items-start  m-2">
    <div class="col-md-6 text-center mr-4">
        <div class="shadow mb-4 px-2 py-4">
            <img class="rounded-circle" style="height:10rem; width: 10rem" src="~/Files/Images/Avatars/@GetAvatarPath(Model)" data-holder-rendered="true">
            <h2>@Model.FullName</h2>
        </div>
        <h3 class="text-left">Contacts</h3>
        <div class="mb-4 text-left py-4">
            <div class="card shadow mb-3">
                <div class="card-body">
                    <div class="row">
                        <div class="col-sm-5">First Name</div>
                        <div class="col-sm-6 text-secondary">@Model.FirstName</div>
                    </div>
                    <hr>
                    <div class="row">
                        <div class="col-sm-5">Last Name</div>
                        <div class="col-sm-6 text-secondary">@Model.LastName</div>
                    </div>
                    <hr>
                    <div class="row">
                        <div class="col-sm-5">Date Of Birth</div>
                        <div class="col-sm-6 text-secondary">@Model.DateOfBirth.ToShortDateString()</div>
                    </div>
                    <hr>
                    @if (Model.Gender != null)
                    {
                        <div class="row">
                            <div class="col-sm-5">Gender</div>
                            <div class="col-sm-6 text-secondary">@Model.Gender.Name</div>
                        </div>
                    }
                    <hr>
                </div>
            </div>
            <h3 class="text-left">Contacts</h3>
            <div class="card shadow mb-3">
                <div class="card-body">
                    <div class="row">
                        <div class="col-sm-5">Email</div>
                        <div class="col-sm-6 text-secondary">@Model.Email</div>
                    </div>
                    <hr>
                    @if (Model.PhoneNumber != null)
                    {
                        <div class="row">
                            <div class="col-sm-5">Phone Number</div>
                            <div class="col-sm-6 text-secondary">@Model.PhoneNumber</div>
                        </div>
                        <hr>
                    }
                </div>
            </div>
        </div>

    </div>

    <div class="col-md-5  px-4 py-2">
        <h2>Posts</h2>
        <div>
            @foreach (var item in Model.Posts)
            {
                var postPath = "";
                @if (item.Image?.Path != null)
                {
                    postPath = item.Image?.Path;
                }
                else
                {
                    postPath = "no-title-image.jpeg";
                }
                <div class="card shadow my-4">

                    <img src="~/Files/Images/Posts/@postPath" alt="@item.Title Image" class="card-img-top" style="">
                    <div class="card-body">
                        <h5 class="card-title">@item.Title</h5>
                    </div>
                    <div class="card-footer text-right">
                        <a asp-area="" asp-controller="Post" asp-action="Details" asp-route-id="@item.Id" class="card-link stretched-link" style="text-decoration: underline">Details</a>
                    </div>
                </div>
            }
        </div>
    </div>
</div>

@*<div>
        @{
            var path = Model.AvatarPath != null ? Model.AvatarPath : Model.Gender?.Name == "Woman" ? "no-profile-image-f.svg" : "no-profile-image-m.svg";
        }
        <img class="rounded-circle" style="height:5rem; width:5rem" src="~/Files/Images/Avatars/@path" data-holder-rendered="true">
    </div>
    <div>
        <p>@Model.FullName</p>
        <p>@Model.DateOfBirth</p>
    </div>
    <p>Posts</p>
    <div>
        @foreach (Post post in Model.Posts)
        {
            var pathPost = "";
            @if (post.Image?.Path != null)
            {
                pathPost = post.Image?.Path;
            }
            else
            {
                pathPost = "no-title-image.jpeg";
            }
            <div class="card m-1" style="max-height: 18rem; max-width: 35rem; min-height: 18rem; min-width: 35rem">
                <img class="card-img-top" src="~/Files/Images/Posts/@pathPost" alt="Card image cap">
                <div class="card-body">
                    <h5 class="card-title">@post.Title</h5>
                    <p class="card-text"><small class="text-muted">@Html.Raw(post.DateUpdated)</small></p>
                    <a asp-area="" asp-controller="Post" asp-action="Details" asp-route-id="@post.Id" class="btn btn-primary">Читать полностью</a>
                    <a asp-area="" asp-controller="Post" asp-action="Edit" asp-route-id="@post.Id" class="btn btn-primary">Редактировать</a>
                    <a asp-area="" asp-controller="Post" asp-action="Delete" asp-route-id="@post.Id" asp-route-imagePath="@post.Image?.Path" class="btn btn-primary">Удалить</a>
                </div>
            </div>
        }
    </div>*@

<link rel="stylesheet" href="~/css/matchDeatails.css" />